{% extends 'base.html' %}
{% load static i18n humanize %}

{% block meta_title %}{{ page_title }}{% endblock meta_title %}
{% block meta_description %}{{ page_description }}{% endblock meta_description %}

{% block main %}
    <h1 class="sr-only">{{ page_title }}</h1>
    <form>
        <fieldset>
            {{ form.q }}

            <details class="doctype-filter">
                <summary>
                    {{ form.doctype.label }}
                </summary>
                {{ form.doctype }}
            </details>
            {{ form.sort }}
            <label for="sort">{{ form.sort.label }}</label>
            {# Translators: Search submit button #}
            {% translate 'Submit search' as search_label %}
            <button type="submit" aria-label="{{ search_label }}">
                <i class="ph-magnifying-glass"></i>
            </button>
        </fieldset>

        {% for field, errors in form.errors.items %}
            {# no clean way to get field labels here, so we just collapse the error lists #}
            {% for error in errors %}
                <li>{{ error }}</li>
            {% endfor %}
        {% endfor %}
    </form>
    <section id="document-list">
        <h1>
            {% comment %}Translators: number of search results{% endcomment %}
            {% blocktranslate with count_humanized=paginator.count|intcomma count counter=paginator.count trimmed %}
                1 result
            {% plural %}
                {{ count_humanized }} total results
            {% endblocktranslate %}
        </h1>
        {% if is_paginated %}
            {% include "corpus/snippets/pagination.html" %}
        {% endif %}
        <ol>
            {% for document in documents %}
                {% include "corpus/snippets/document_result.html" %}
            {% endfor %}
        </ol>
        {% if is_paginated %}
            {% include "corpus/snippets/pagination.html" %}
        {% endif %}
    </section>
{% endblock main %}
