{% extends 'base.html' %}
{% load static i18n corpus_extras %}

{% block meta_title %}{{ page_title }}{% endblock meta_title %}
{% block meta_description %}{{ page_description }}{% endblock meta_description %}

{% block main %}
    <h1 class="sr-only">{{ page_title }}</h1>
    <!-- document scholarship records -->
    {% include "corpus/snippets/document_header.html" %}
    <div class="container">
        {% include "corpus/snippets/document_tabs.html" %}
        <ol>
            {% for source in document.unique_sources %}
                {% spaceless %}
                    <li class="citation">
                        <dl>
                            <dt class="sr-only">
                                {# Translators: accessibility label for a footnote source citation in scholarship records view #}
                                {% translate 'Bibliographic citation' %}
                            </dt>
                            <dd>
                                {{ source.formatted_display|safe }}
                                {% if source.source_type.type == "Unpublished" %}
                                    {# Translators: label for an unpublished scholarship record #}
                                    <div class="unpublished">{% translate 'unpublished' %}</div>
                                {% endif %}
                            </dd>
                            {% with document|footnotes_on_source:source as footnotes %}
                                <dt class="relation">
                                    {% if footnotes|length == 1 %}
                                        {% with fn=footnotes.0 single="true" %}
                                            {% if fn.location or fn.url %}
                                                {% include "corpus/snippets/footnote_location.html" %}
                                            {% else %}
                                                {# Translators: label for included document relations for a footnote #}
                                                {% translate "includes" %}
                                            {% endif %}
                                        {% endwith %}
                                    {% else %}
                                        see
                                        <ul>
                                            {% for fn in footnotes %}
                                                <li class="location">
                                                    {% include "corpus/snippets/footnote_location.html" %}
                                                </li>
                                            {% endfor %}
                                        </ul>
                                        for
                                    {% endif %}
                                </dt>
                                <dd class="relation">
                                    {% if footnotes|length == 1 %}
                                        {{ footnotes.0.doc_relation }}
                                    {% else %}
                                        {{ document|unique_relations_on_source:source }}
                                    {% endif %}
                                </dd>
                            {% endwith %}
                        </dl>
                    </li>
                {% endspaceless %}
            {% endfor %}
        </ol>
    </div>
{% endblock main %}
