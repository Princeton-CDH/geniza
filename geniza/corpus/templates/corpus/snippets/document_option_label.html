{# template snippet for displaying document label on a form #}
{# used on document merge form to provide enough information to merge accurately #}
<div class="merge-document-label">
    <h2><a target="_blank" href="{% url 'admin:corpus_document_change' document.id %}">{{ document }}</a></h2>
    <dl>
        <dt>Description</dt>
        <dd>{{ document.description }}</dd>
        <dt>Languages</dt>
        <dd>{{ document.all_languages }}</dd>
        <dt>Tags</dt>
        <dd>{{ document.all_tags }}</dd>
        <dt>Notes</dt>
        <dd>{{ document.notes }}</dd>
        <dt>Needs Review</dt>
        <dd>{{ document.needs_review }}</dd>
    </dl>

    {% if document.footnotes.count %}<h3>Scholarship Records</h3>{% endif %}
    <ol>
        {% regroup document.footnotes.all by source as source_list %}
        {% for source in source_list %}
            <li class="citation">
                <dl>
                    <dt class="sr-only">Bibliographic citation</dt>
                    <dd>
                        {{ source.grouper.formatted_display|safe }}
                        {% if source.grouper.source_type.type == "Unpublished" %}
                            <div class="unpublished">unpublished</div>
                        {% endif %}
                    </dd>
                    <dt class="relation">
                        <ul>
                            {% for fn in source.list %}
                                {% include "corpus/snippets/footnote_location.html" %}
                            {% endfor %}
                        </ul>
                    </dt>
                    <dd class="relation">
                        {{ source.list.0.doc_relation }}
                    </dd>
                </dl>
            </li>
        {% endfor %}
    </ol>
</div>
