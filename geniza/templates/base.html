{% load static render_bundle_csp i18n wagtailuserbar %}
<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE }}">
    <head>
        <!-- metadata -->
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>{% block meta_title %}{% endblock meta_title %}</title>
        <link rel="apple-touch-icon" sizes="180x180" href="{% static 'img/icons/apple-touch-icon.png' %}">
        <link rel="icon" type="image/png" sizes="32x32" href="{% static 'img/icons/favicon-32x32.png' %}">
        <link rel="icon" type="image/png" sizes="16x16" href="{% static 'img/icons/favicon-16x16.png' %}">
        <link rel="manifest" href="{% static 'site.webmanifest' %}">
        <link rel="mask-icon" href="{% static 'img/icons/safari-pinned-tab.svg' %}" color="#6b59c1">
        <meta name="msapplication-TileColor" content="#603cba">
        <meta name="theme-color" content="#6b59c1">
        <meta name="description" content="{% block meta_description %}{% endblock meta_description %}">
        {% block extrameta %}{% endblock extrameta %}
        <!-- styles -->
        {% if SHOW_TEST_WARNING %}
            <link rel="stylesheet" type="text/css" href="{% static 'css/test-banner.css' %}"/>
        {% endif %}
        <!-- resource preloading -->
        <link rel="preconnect" href="https://unpkg.com" crossorigin />
        <link rel="preload" as="font" type="font/woff2" href="{{ FONT_URL_PREFIX }}WF-037420-011833-002518.woff2" crossorigin />
        <link rel="preload" as="font" type="font/woff2" href="{{ FONT_URL_PREFIX }}WF-037420-011833-002521.woff2" crossorigin />
        <link rel="preload" as="font" type="font/woff2" href="{{ FONT_URL_PREFIX }}WF-037420-011914-001035.woff2" crossorigin />
        <link rel="preload" as="font" type="font/woff2" href="{{ FONT_URL_PREFIX }}WF-037420-011914-001036.woff2" crossorigin />
        <link rel="preload" as="font" type="font/woff2" href="{{ FONT_URL_PREFIX }}WF-037420-011914-001041.woff2" crossorigin />
        <link rel="preload" as="font" type="font/woff" href="{{ FONT_URL_PREFIX }}WF-037420-011833-002518.woff" crossorigin />
        <link rel="preload" as="font" type="font/woff" href="{{ FONT_URL_PREFIX }}WF-037420-011833-002521.woff" crossorigin />
        <link rel="preload" as="font" type="font/woff" href="{{ FONT_URL_PREFIX }}WF-037420-011914-001035.woff" crossorigin />
        <link rel="preload" as="font" type="font/woff" href="{{ FONT_URL_PREFIX }}WF-037420-011914-001036.woff" crossorigin />
        <link rel="preload" as="font" type="font/woff" href="{{ FONT_URL_PREFIX }}WF-037420-011914-001041.woff" crossorigin />
        {% if page_includes_transcriptions %} {# only preload transcription font when needed #}
            <link rel="preload" as="font" type="font/woff2" href="{{ FONT_URL_PREFIX }}FrankRuhl1924MFMediumMedium.woff2" crossorigin />
            <link rel="preload" as="font" type="font/woff" href="{{ FONT_URL_PREFIX }}FrankRuhl1924MFMediumMedium.woff" crossorigin />
        {% endif %}
        {# include current phosphor icons as css; check https://unpkg.com/phosphor-icons for latest version #}
        <link rel="stylesheet" type="text/css" href="https://unpkg.com/phosphor-icons@1.3.2/src/css/phosphor.css" nonce="{{ reqest.csp_nonce }}"/>
        {% render_bundle_csp "main" "css" %}
        {% block extrastyle %}{% endblock extrastyle %}
        <!-- scripts -->
        {% render_bundle_csp "main" "js" attrs='defer' %}
        {% render_bundle_csp "stimulus_app" "js" attrs='defer' %}
        {# analytics #}
        {% if not request.is_preview and GTAGS_ANALYTICS_ID %}
            {% include 'snippets/analytics.html' %}
        {% endif %}
        {% block extrascript %}{% endblock extrascript %}
    </head>
    <body id="{{ page_type }}{% block page_type %}{% endblock page_type %}">
        {% wagtailuserbar 'bottom-right' %}
        {% if SHOW_TEST_WARNING %}
            {% include 'snippets/test_banner.html' %}
        {% endif %}
        {% block body %}
            <a id="skip" class="sr-only-focusable" href="#main-content">{% translate "Skip to main content" %}</a>
            <header>
                <div class="controls">
                    {% include "snippets/theme_toggle.html" %}
                    {% include "snippets/language_switcher.html" %}
                </div>
                {% include "nav.html" %}
            </header>

            <main id="main-content">{% block main %}{% endblock main %}</main>
            <footer>
                {% include "footer.html" %}
            </footer>
        {% endblock body %}
    </body>
</html>
