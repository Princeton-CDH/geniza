<script src="https://unpkg.com/mirador@latest/dist/mirador.min.js"></script>

<div style="max-width: 500px; margin: 10px auto;">

    <h1>PGPID: {{ document.id }}</h1>

    <div><b>Shelfmark</b>: {{ document.shelfmark }}</div>

    {% if document.doctype %}
    <div><b>Document Type</b>: {{ document.doctype }}</div>
    {% endif %}
    
    {% if document %} {# complete this boolean #}
    <div><b>Date</b>: [date]</div>
    {% endif %}

    {% if document.last_modified %}
    <div><b>Last modified</b>: {{ document.last_modified }}</div>
    {% endif %}

    <div><b>Editor</b>: [editor]</div>

    <div><b>Tags</b>: {{ tags }}</div>

    <h2>Fragment{{ document.fragments.count|pluralize }}</h2>
    {% for fragment in document.fragments.all %}
    <div>
        <b>{{ fragment }}</b>
        {% if fragment.iiif_url %}
            <div class="wrapper">
                <div id="iiif_viewer" class="image-viewer" style="position: relative; height:375px;"></div>
                <script type="text/javascript">
                  Mirador.viewer({
                    id: "iiif_viewer",
                    window: {
                      allowClose: false, // Prevent the user from closing this window
                      allowMaximize: false,
                      defaultSideBarPanel: 'info',
                      sideBarOpenByDefault: false,
                      views: [ // Only allow the user to select single and gallery view
                        { key: 'single' },
                        { key: 'gallery' },
                      ],
                    defaultView: 'single',
                    },
                    galleryView: {
                        height: 250
                    },
                    thumbnailNavigation: {
                        defaultPosition: 'far-right'
                    },
                    windows: [{
                        loadedManifest: '{{ fragment.iiif_url }}',
                    }],
                    workspaceControlPanel: {
                        enabled: false, // Remove extra workspace settings,
                    }
                  });
                </script>
            </div>
        {% endif %}
    </div>
    {% endfor %}

    <h2>Description</h2>
    <p>{{ document.description }}</p>

</div>
