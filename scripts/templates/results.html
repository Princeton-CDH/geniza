{% extends "base.html" %}

{% block title %}Geniza Search | Search results for {{ search_term }} | {% endblock %}

{% block head %}
 {{ super() }}
    <style>
        /*input[type=text] {font-size: 16pt; width: 90%;}*/
        /* style highlights tagged by Solr */
        em {color: #FF6300; font-weight: bold; font-style: normal; }
    </style>
{% endblock %}

{% block content %}
    {% include 'search_form.html' %}

    <p class="fr w-100 w-20-ns ma0">Showing {{ results|length }} of {{ total }} result{% if total > 1 %}s{% endif %}</p>
    {% if results|length > 0 %}
    <ul class="mw9 ml0 pl0 center ph3-ns list">
        <li class="f5 lh-copy cf ph2-ns serif fw6 pl0 avenir">
            <span class="fl w-20 w-10-ns pa2 tr">PGP ID</span>
            <span class="fl w-30 w-30-ns pa2">Description</span>
        </li>
        {% for result in results %}
        <li class="cf ph2-ns pl0" data-id="{{ result.id }}">
            <div class="fl w-20 w-10-ns pa2 b tr avenir fw5">{{ result.id }}</div>
            <div class="fl w-80 pa2">
                <span>{{ result.description_txt[0]|safe }}</span><br/>
                <div class="w-100 flex justify-between">
                    <!-- source mss -->
                    <div class="id fl purple avenir">{{ result.shelfmark_s }} | {{ result.library_s }}</div><br>
                    <!-- View external source -->
                    {% if result.link_s %}
                    <div><a class="id no-underline fl purple avenir" href="{{ result.link_s }}">View external record</a></div>
                    {% endif %}
                </div>
                <div class="w-100 flex justify-between items-right">
                    <!-- source mss -->
                    <div class="id">
                    {% if result.tags_ss %}
                    Tags: {{ result.tags_ss|join(', ') }}
                    {% endif %}
                    </div>
                    <!-- View external source -->
                    <!-- score + relevance bar -->
                    {% if result.score %}
                    <div class="fr w-20-ns">
                        <!-- relevance bar -->
                        <div class="ba w-25-ns w-30 h1 fr ma1">
                            <div class="bg-light-blue h-100 mw-100" style="width:{{ result.score / 100 * 100 }}%">
                            </div>
                        </div>
                        <span class="score light-silver fr pa1">{{ result.score }}</span>
                    </div>
                    {% endif %}
                </div>

                
            </div>
        </li>
        {% endfor %}
    </ul>
    {% endif %}
{% endblock %}
