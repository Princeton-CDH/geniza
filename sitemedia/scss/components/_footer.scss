// -----------------------------------------------------------------------------
// Site footer that appears on every page.
// -----------------------------------------------------------------------------

@use "../base/spacing";
@use "../base/typography";

// Mixin used for icons to the left of text (span or link)
@mixin icon-and-text {
    a::before,
    span::before {
        @include typography.icon-button-md;
        font-family: "Phosphor" !important;
        margin: 0 0.2rem 0 0;
        vertical-align: middle;
    }
}

footer {
    @include typography.meta;
    * {
        max-width: 100%;
    }
    text-align: center;

    // footer background
    background: url("/static/img/ui/mobile/dark/footer-gradient.svg") top,
        url("/static/img/ui/mobile/dark/footer-image.png") top,
        url("/static/img/ui/mobile/dark/footer-base.svg") top;
    background-repeat: no-repeat, no-repeat, no-repeat;
    background-size: 100% auto, 100% auto, 100% auto;

    // footer site navigation
    nav#footer-nav {
        padding: 25% 17.5% 0; // Use percentages to scale with background
        text-align: left;
        ul {
            display: grid;
            grid-template-rows: repeat(3, auto);
            grid-auto-flow: column dense;
            grid-auto-columns: 1fr 1fr;
            a {
                text-decoration: none;
            }
            li {
                margin-bottom: 0.5rem;
            }
            li.has-submenu {
                grid-row-end: span 20; // Hack to get tight grid
                ul {
                    display: flex;
                    flex-flow: column;
                    li.menu-item {
                        margin-left: 1rem;
                    }
                }
            }
        }
    }

    // footer links to PGL, CDH
    ul#footer-links {
        & > li {
            margin-top: 1.5rem;
        }
        svg {
            fill: var(--logo);
            &#pgl-logo {
                width: 177px;
                height: 85px;
            }
            &#cdh-logo {
                width: 108px;
                height: 80px;
            }
        }

        // social links
        ul.social li {
            @include icon-and-text;
            a.twitter::before {
                content: "\f341"; // phosphor twitter-logo icon
            }
            a.instagram::before {
                content: "\f1e1"; // phosphor instagram-logo icon
            }
        }
    }

    // Legal and accessibility matters list
    ul#legal {
        padding-top: spacing.$spacing-lg;
        margin: spacing.$spacing-md spacing.$spacing-xs;
        border-top: 1px solid var(--on-background);

        // accessibility assistance link
        a#accessibility {
            text-decoration: underline;
            text-decoration-thickness: 0.06rem;
            text-decoration-color: var(--on-background);
            text-decoration-skip-ink: none;
            text-underline-offset: 0.375rem;
        }

        // copyright text
        li#copyright {
            margin: 1rem 0 0;
            @include icon-and-text;
            span::before {
                content: "\f115"; // phosphor copyright icon
            }
        }

        // CC-BY license icon
        li#license {
            margin: 0 0 0.5rem;
            text-align: center;
            img {
                width: 2rem;
            }
        }

        // Princeton logo
        svg#princeton-logo {
            fill: var(--logo);
            width: 185px;
            height: 63px;
        }
    }
}
