// -----------------------------------------------------------------------------
// Main site navigation that appears on every page.
// -----------------------------------------------------------------------------

@use "../base/breakpoints";
@use "../base/colors";
@use "../base/spacing";
@use "../base/typography";

.site-nav {
    display: flex;
    flex-flow: row wrap;
    @include breakpoints.for-tablet-landscape-up {
        flex-flow: row nowrap;
        align-items: flex-end;
        justify-content: space-between;
    }
    // Logotype, links to homepage
    a.home-link {
        @include typography.headline-5;
        @include breakpoints.for-tablet-landscape-up {
            @include typography.headline-4;
            @include colors.apply-combo("primary");
        }

        display: inline-block;
        flex: none;
        padding: spacing.$spacing-lg spacing.$spacing-md;
    }
    // Mobile-only menu buttons
    li.menu-button {
        display: block;
        a {
            display: flex;
            text-decoration: none;
            font-size: typography.$text-size-3xl;
            @include colors.apply-theme("on-background");
        }
    }
    // Top-left corner links: home and open menu button
    ul#corner-links {
        display: flex;
        flex-flow: row wrap;
        align-items: center;
        li.menu-button a::before {
            font-family: "Phosphor";
            content: "\f1fa";
        }
    }
    // List of links
    ul#menu {
        display: none;
        position: fixed;
        flex-flow: row wrap;
        align-items: center;
        justify-content: space-between;
        padding: 0;
        max-width: 100%;
        width: 100%;
        li.menu-button {
            display: none;
            & a::before {
                font-family: "Phosphor";
                content: "\f36d";
            }
        }
        &:target {
            display: flex;
            pointer-events: all;
            flex: 1 0 100%;
            z-index: 100;
            @include breakpoints.for-tablet-landscape-up {
                flex: 1 0 auto;
            }
            li.menu-button {
                display: flex;
                margin-right: spacing.$spacing-sm;
            }
        }
        @include breakpoints.for-tablet-landscape-up {
            position: relative;
            display: flex;
            flex: 1 0 auto;
            flex-flow: row nowrap;
            justify-content: flex-end;
            outline: 1px solid;
            width: auto;
            margin: 0 spacing.$spacing-sm 0 spacing.$spacing-2xl;
            z-index: 0;
            pointer-events: all;
        }
        @include colors.apply-theme("nav-outline", "outline-color");
        @include colors.apply-theme("background", "background-color");
    }
    li.menu-button,
    ul#menu li.home,
    ul#menu:target li.menu-button {
        @include breakpoints.for-tablet-landscape-up {
            display: none;
        }
    }

    // Individual menu items
    .menu-item {
        flex: 1 0 100%;
        // Mobile links which need padding, inline-block, and border-top
        a {
            text-decoration: none;
            font-size: typography.$text-size-2md;
            padding: spacing.$spacing-2xl spacing.$spacing-sm
                spacing.$spacing-lg;
            width: 100%;
            display: inline-block;
            border-top: 1px solid;
            @include colors.apply-theme("nav-outline", "border-top-color");
        }
        & + .menu-item a {
            padding-top: spacing.$spacing-lg;
            border-top-color: colors.$gray-50;
        }
        &:last-child {
            height: 100vh;
        }
        @include breakpoints.for-tablet-landscape-up {
            // desktop links (strip some mobile styles)
            flex: 0 0 auto;
            padding: spacing.$spacing-xs 0;
            a {
                display: inline;
                border: none;
                padding: 0;
            }
            & + .menu-item {
                margin-left: spacing.$spacing-2xl;
                & a {
                    border: none;
                    padding: 0;
                }
            }
            &:last-child {
                margin-right: spacing.$spacing-4xl;
                height: auto;
                // NOTE: Icon for "About" link, may need to be moved around if order changes
                &::after {
                    font-family: "Phosphor";
                    content: "\f0c2"; // phosphor caret-down icon
                    float: right;
                    margin-left: spacing.$spacing-xs;
                    padding: 0;
                }
            }
        }
    }

    // Currently active page
    a[aria-current="page"] {
        font-weight: bold;
        font-size: typography.$text-size-2md;
    }
}
